# Epic 11 Retrospective - Current Time Indicator Alignment

Status: done

## Epic Summary

- Epic: 11
- Stories: 1 total / 1 done
- Focus: 현재시간 가로줄 위치 정확도 개선 및 실시간 갱신 안정화

## What Went Well

1. 하드코딩 픽셀 계산을 제거하고 DOM 실측 기반 계산으로 전환해 스타일 변경에 대한 내성을 높였다.
2. 현재시간 라인을 주기적으로 갱신해 화면 고정 상태에서도 표시 정확도를 유지했다.
3. 주간 범위/운영시간 외 숨김 처리를 추가해 오표시를 방지했다.
4. 월/연 모드 전환 시 타이머 정리까지 포함해 리소스 누수 가능성을 줄였다.
5. `better-sqlite3` 재빌드 후 E2E 13개를 통과해 회귀 안정성을 검증했다.

## What Did Not Go Well

1. 현재 실시간 검증은 E2E의 간접 검증 중심으로, 현재시간 라인 전용 시각 회귀 테스트는 부족하다.
2. 브라우저 리사이즈/줌 변화 중 위치 보정은 주기 갱신에 의존하며 이벤트 기반 즉시 보정은 미구현이다.

## Key Lessons Learned

1. 시간 인디케이터는 비즈니스 로직보다 렌더링 좌표계 정합이 정확도의 핵심이다.
2. UI 수치 하드코딩은 디자인 변경 시 누적 오차를 만들기 쉬워 실측 기반 접근이 안전하다.
3. 모드 전환/라이프사이클에서 타이머 정리 여부는 장기 안정성에 큰 영향을 준다.

## Action Items

- [ ] 현재시간 라인 전용 시각 회귀 테스트(고정 시간 주입/위치 검증)를 추가한다.
  - Owner: Dev/QA
  - Type: Test coverage
- [ ] 윈도우 리사이즈 시 즉시 위치 재계산(이벤트 기반) 여부를 검토한다.
  - Owner: Dev
  - Type: UX polish
- [ ] 운영시간 정책이 변경 가능해질 경우(예: 08:00~22:00) 설정화 범위를 정의한다.
  - Owner: PM/Dev
  - Type: Product scope

## Next Epic Readiness

- Epic 11은 완료 상태이며, 후속 개선은 테스트 강화/UX 폴리시 스토리로 분리해 진행 가능한 상태다.

